<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Search Page</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-black text-white flex flex-col items-center justify-center min-h-screen" id="body">
  <div class="absolute inset-0 bg-cover bg-center bg-no-repeat opacity-50" id="background"></div>
  <div class="relative z-10 flex flex-col items-center w-full max-w-2xl p-4">
    <!-- Weather and News -->
    <div class="flex justify-between w-full mb-4">
      <div id="weather" class="text-sm"></div>
      <div id="news" class="text-sm max-w-xs truncate"></div>
    </div>
    <!-- Clock -->
    <div class="text-4xl font-mono mb-4" id="clock"></div>
    <!-- Image Upload Button -->
    <label class="absolute top-4 right-4 cursor-pointer">
      <input type="file" accept="image/*" id="imageUpload" class="hidden">
      <span class="bg-black p-2 rounded-full hover:bg-gray-900">üì∑</span>
    </label>
    <!-- Search Form -->
    <div class="w-full flex items-center space-x-2">
      <select id="searchEngine" class="bg-black text-white p-2 rounded-md focus:outline-none border border-white">
        <option value="google">Google</option>
        <option value="bing">Bing</option>
        <option value="yandex">Yandex</option>
      </select>
      <input type="text" id="searchInput" class="w-full bg-black p-2 rounded-md focus:outline-none border border-white" placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, yt cats)">
      <button onclick="performSearch()" class="bg-blue-600 p-2 rounded-md hover:bg-blue-700">–ü–æ–∏—Å–∫</button>
    </div>
  </div>

  <script>
    // Clock functionality
    function updateClock() {
      const now = new Date();
      const time = now.toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
      document.getElementById('clock').textContent = time;
    }
    setInterval(updateClock, 1000);
    updateClock();

    // Save and load settings
    function saveSettings() {
      localStorage.setItem('searchEngine', document.getElementById('searchEngine').value);
      const bgImage = document.getElementById('background').style.backgroundImage;
      if (bgImage) localStorage.setItem('backgroundImage', bgImage);
    }

    function loadSettings() {
      const searchEngine = localStorage.getItem('searchEngine');
      if (searchEngine) document.getElementById('searchEngine').value = searchEngine;
      const bgImage = localStorage.getItem('backgroundImage');
      if (bgImage) document.getElementById('background').style.backgroundImage = bgImage;
    }
    loadSettings();

    // Image upload
    document.getElementById('imageUpload').addEventListener('change', (e) => {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = (event) => {
          document.getElementById('background').style.backgroundImage = `url(${event.target.result})`;
          saveSettings();
        };
        reader.readAsDataURL(file);
      }
    });

    // Search functionality
    function performSearch() {
      const input = document.getElementById('searchInput').value.trim();
      const engine = document.getElementById('searchEngine').value;
      saveSettings();

      const shortcuts = {
        'yt': 'https://www.youtube.com/results?search_query=',
        'pin': 'https://www.pinterest.com/search/pins/?q=',
        'gp': 'https://chatgpt.com/?q=',
        'gt': 'https://github.com/search?q='
      };

      let query = input;
      let url;
      const [prefix, ...rest] = input.split(' ');
      if (shortcuts[prefix]) {
        query = rest.join(' ');
        url = shortcuts[prefix] + encodeURIComponent(query);
      } else {
        if (engine === 'google') url = `https://www.google.com/search?q=${encodeURIComponent(query)}`;
        else if (engine === 'bing') url = `https://www.bing.com/search?q=${encodeURIComponent(query)}`;
        else if (engine === 'yandex') url = `https://yandex.com/search/?text=${encodeURIComponent(query)}`;
      }
      window.location.href = url;
    }

    // Handle Enter key
    document.getElementById('searchInput').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') performSearch();
    });

    // Fetch weather based on IP
    async function fetchWeather() {
      try {
        const response = await fetch('https://api.weatherapi.com/v1/current.json?key=your_api_key&q=auto:ip');
        const data = await response.json();
        document.getElementById('weather').textContent = `${data.location.name}: ${data.current.temp_c}¬∞C, ${data.current.condition.text}`;
      } catch (error) {
        document.getElementById('weather').textContent = '–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø–æ–≥–æ–¥—É';
      }
    }
    fetchWeather();

    // Fetch news
    async function fetchNews() {
      try {
        const response = await fetch('https://newsapi.org/v2/top-headlines?country=ru&apiKey=your_api_key');
        const data = await response.json();
        const article = data.articles[0];
        document.getElementById('news').textContent = article.title;
      } catch (error) {
        document.getElementById('news').textContent = '–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤–æ—Å—Ç–∏';
      }
    }
    fetchNews();
  </script>
</body>
</html>
